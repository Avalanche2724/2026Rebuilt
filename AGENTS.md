Build: ./gradlew build
For any Gradle action, use WPILib JDK: `JAVA_HOME=~/wpilib/2026/jdk`
All commit messages generated by Codex must start with `(codex)`.

Code Guidelines
- Keep the code organized (clear package structure; avoid dumping logic into `Robot`).
- Project convention: do not create per-subsystem packages (keep subsystems under `frc.robot.subsystems` unless explicitly directed otherwise).
- Subsystem ordering (within a subsystem class/file):
  - `private static final` tuning/reused constants (SCREAMING_SNAKE_CASE, units in names) and other constants that benefit from being easy to scan.
  - Hardware fields + internal state (motors/sensors, sim objects, alerts, cached state). Avoid exposing hardware objects outside the subsystem.
  - Hardware configuration in constructor.
  - Public subsystem APIs / command factories (anything that writes to hardware must either be a private method or a command).
  - `periodic()` / `updateSim()` / other helpers (e.g. conversions, clamps, small utilities).
- Constants:
  - Prefer inlining constants at the site where they are used when the meaning is obvious from context (example: motor configuration fields like `configs.Slot0.kP = 0.5;`).
  - Use named constants only for values that are likely to change often during tuning or that are reused across multiple call sites (examples: motor/controller IDs, gear ratios, mechanism position/velocity setpoints).
  - Values unlikely to change often (example: simulation moment of inertia) may be inlined with a short explanatory comment if the meaning is not immediately obvious.
  - Keep constants in the same file where they are used; do not create separate `*Constants` classes/files unless explicitly directed otherwise.
- Doubles: if a value is a `double`, write it with a decimal point (`1.0`, not `1`).
- Constants at top of file with `SCREAMING_SNAKE_CASE`.
- Avoid magic numbers; use named constants (include units in names, e.g. `MAX_VELOCITY_MPS`); avoid manual unit conversions, use WPILib units (e.g. `RotationsPerSecond.convertFrom(value, RadiansPerSecond)`) and static import any WPILib units used.
- Prefer immutable where reasonable (`final` fields ok); do not mark locals `final`; for non-primitive locals prefer `var`; minimize global/static state.
- Keep robot loop code non-blocking (no `Thread.sleep`, no long I/O in `periodic`/command `execute`).
- Prefer command factory methods (e.g. `Commands.*`) over explicit command classes.
- Avoid allocating new motor control request objects inside command lambdas (e.g. `new VoltageOut(...)`, `new VelocityVoltage(...)` in a commandâ€™s execute loop). Cache request objects as fields and use `with...(...)` to update setpoints.
- Comments should explain "why" and constraints; avoid narrating obvious code.
- Build before commit: `./gradlew build` (build runs formatting via Spotless).

Sources (vendor + WPILib)
- Use WPILib JDK to avoid Gradle errors: `JAVA_HOME=~/wpilib/2026/jdk`.
- Download all Java sources jars with Gradle: `./gradlew downloadSources`.
- Unpack sources into `build/sources/` for fast searching: `./gradlew syncSources`.
- Vendor libraries:
  - Vendordep definitions live in `vendordeps/*.json` (Maven URLs + artifacts).
  - Sources jars land in `~/.gradle/caches/modules-2/files-2.1/<group>/<artifact>/<version>/`.
  - Inspect by searching `build/sources/` with `rg -n`, or with `jar tf <sources.jar>` / `unzip -q <sources.jar> -d /tmp/<dir>`.
- WPILib:
  - WPILib sources jars are also in `~/.gradle/caches/modules-2/files-2.1/edu.wpi.first/`.
  - Inspect by searching `build/sources/edu.wpi.first.*` with `rg -n`, or by unzipping jars from the cache.
